@{
    string id = Request["refreshid"];
    if (!id.IsGuid())
    {
        Response.Write("[]");
        return;
    }
    Business.Platform.RoleApp BRoleApp = new Business.Platform.RoleApp();
    var childs = BRoleApp.GetChild(id.ToGuid());
    System.Text.StringBuilder json = new System.Text.StringBuilder("[", childs.Count * 50);
    int count = childs.Count;
    int i = 0;
    foreach (var child in childs)
    {
        json.Append("{");
        json.AppendFormat("\"id\":\"{0}\",", child.ID);
        json.AppendFormat("\"title\":\"{0}\",", child.Title);
        json.AppendFormat("\"ico\":\"{0}\",", "");
        json.AppendFormat("\"link\":\"{0}\",", "");
        json.AppendFormat("\"model\":\"{0}\",", "");
        json.AppendFormat("\"width\":\"{0}\",", "");
        json.AppendFormat("\"height\":\"{0}\",", "");
        json.AppendFormat("\"hasChilds\":\"{0}\",", BRoleApp.HasChild(child.ID) ? "1" : "0");
        json.AppendFormat("\"childs\":[");
        json.Append("]");
        json.Append("}");
        if (i++ < count - 1)
        {
            json.Append(",");
        }
    }
    json.Append("]");
    Response.Write(json.ToString());
}